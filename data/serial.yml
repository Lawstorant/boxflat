# MOZA Racing Serial protocol data
magic-value: 13    # For security byte
message-start: 126 #"7e"

device-ids:
  hub:
  base: 19
  wheel: 23
  pedals:
  dash:
  hpattern:
  estop:
  sequential: 26
  handbrake: 27

  estop-usb: 18 #?
  pedals-usb: 18 #?
  hpattern-usb: 18 #?
  sequential-usb: 18
  handbrake-usb: 18

# TODO: EEPROM commands
# Maybe that's how we update FW?
# ===========================================
# Every command in this dict consists of:
# - read request group id
# - write request group id
# - command id
# - command payload size in bytes
#
# If a read/write request group has a value
# of -1, it doesn't support read/write
# operation
# ===========================================
commands:
# Main commands(?)
  main-set-compat-mode:
    read: -1
    write: 31
    id: 19
    bytes: 1

  main-get-compat-mode:
    read: 31
    write: -1
    id: 23
    bytes: 1

  main-get-ble-mode:
    read: 31
    write: -1
    id: 70
    bytes: 1

  main-set-ble-mode:
    read: -1
    write: 31
    id: 71
    bytes: 1

  main-get-led-status:
    read: 31
    write: -1
    id: 8
    bytes: 1

  main-set-led-status:
    read: -1
    write: 31
    id: 9
    bytes: 1

  main-set-ffb-status:
    read: -1
    write: 33
    id: 6
    bytes: 1

  main-get-ffb-status:
    read: 33
    write: -1
    id: 7
    bytes: 1

# Pedals
  pedal-throttle-dir:
    read: 35
    write: 36
    id: 1
    bytes: 2

  pedal-throttle-min:
    read: 35
    write: 36
    id: 2
    bytes: 2

  pedal-throttle-max:
    read: 35
    write: 36
    id: 3
    bytes: 2

  pedal-brake-dir:
    read: 35
    write: 36
    id: 4
    bytes: 2

  pedal-brake-min:
    read: 35
    write: 36
    id: 5
    bytes: 2

  pedal-brake-max:
    read: 35
    write: 36
    id: 6
    bytes: 2

  pedal-clutch-dir:
    read: 35
    write: 36
    id: 7
    bytes: 2

  pedal-clutch-min:
    read: 35
    write: 36
    id: 8
    bytes: 2

  pedal-clutch-max:
    read: 35
    write: 36
    id: 9
    bytes: 2

  pedal-hid-mode:
    read: 35
    write: 36
    id: 13
    bytes: 2

  pedal-throttle-y1:
    read: 35
    write: 36
    id: 14
    bytes: 4

  pedal-throttle-y2:
    read: 35
    write: 36
    id: 15
    bytes: 4

  pedal-throttle-y3:
    read: 35
    write: 36
    id: 16
    bytes: 4

  pedal-throttle-y4:
    read: 35
    write: 36
    id: 17
    bytes: 4

  pedal-brake-y1:
    read: 35
    write: 36
    id: 18
    bytes: 4

  pedal-brake-y2:
    read: 35
    write: 36
    id: 19
    bytes: 4

  pedal-brake-y3:
    read: 35
    write: 36
    id: 20
    bytes: 4

  pedal-brake-y4:
    read: 35
    write: 36
    id: 21
    bytes: 4

  pedal-clutch-y1:
    read: 35
    write: 36
    id: 22
    bytes: 4

  pedal-clutch-y2:
    read: 35
    write: 36
    id: 23
    bytes: 4

  pedal-clutch-y3:
    read: 35
    write: 36
    id: 24
    bytes: 4

  pedal-clutch-y4:
    read: 35
    write: 36
    id: 25
    bytes: 4

  pedal-brake-max-force:
    read: 35
    write: 36
    id: 26
    bytes: 4

  pedal-throttle-y5:
    read: 35
    write: 36
    id: 27
    bytes: 4

  pedal-brake-y5:
    read: 35
    write: 36
    id: 28
    bytes: 4

  pedal-clutch-y5:
    read: 35
    write: 36
    id: 29
    bytes: 4

  pedal-throttle-hid-source:
    read: 35
    write: 36
    id: 30
    bytes: 2

  pedal-throttle-hid-cmd:
    read: 35
    write: 36
    id: 31
    bytes: 2

  pedal-throttle-output:
    read: 37
    write: -1
    id: 1
    bytes: 2

  pedal-brake-output:
    read: 37
    write: -1
    id: 2
    bytes: 2

  pedal-clutch-output:
    read: 37
    write: -1
    id: 3
    bytes: 2

# Wheelbase
  base-limit:
    read: 40
    write: 41
    id: 1
    bytes: 2

  base-ffb-strength:
    read: 40
    write: 41
    id: 2
    bytes: 2

  base-inertia:
    read: 40
    write: 41
    id: 4
    bytes: 2

  base-damper:
    read: 40
    write: 41
    id: 7
    bytes: 2

  base-friction:
    read: 40
    write: 41
    id: 8
    bytes: 2

  base-spring:
    read: 40
    write: 41
    id: 9
    bytes: 2

  base-speed:
    read: 40
    write: 41
    id: 10
    bytes: 2

  base-road-sensitivity:
    read: 40
    write: 41
    id: 12
    bytes: 2

  base-protection:
    read: 40
    write: 41
    id: 13
    bytes: 2

  base-equalizer1:
    read: 40
    write: 41
    id: 14
    bytes: 2

  base-equalizer2:
    read: 40
    write: 41
    id: 15
    bytes: 2

  base-equalizer3:
    read: 40
    write: 41
    id: 16
    bytes: 2

  base-equalizer4:
    read: 40
    write: 41
    id: 17
    bytes: 2

  base-equalizer5:
    read: 40
    write: 41
    id: 20
    bytes: 2

  base-equalizer6:
    read: 40
    write: 41
    id: 44
    bytes: 2

  base-torque:
    read: 40
    write: 41
    id: 18
    bytes: 2

  base-natural-inertia:
    read: 40
    write: 41
    id: 19
    bytes: 2

  base-natural-inertia-enable:
    read: 40
    write: 41
    id: 22
    bytes: 2

  base-maximum-angle:
    read: 40
    write: 41
    id: 23
    bytes: 2

  base-ffb-reverse:
    read: 40
    write: 41
    id: 24
    bytes: 2

  base-speed-damping:
    read: 40
    write: 41
    id: 25
    bytes: 2

  base-speed-damping-point:
    read: 40
    write: 41
    id: 26
    bytes: 2

  base-soft-limit-strength:
    read: 40
    write: 41
    id: 27
    bytes: 2

  base-soft-limit-retain:
    read: 40
    write: 41
    id: 28
    bytes: 2

  base-temp-strategy:
    read: 40
    write: 41
    id: 30
    bytes: 2

  base-soft-limit-stifness:
    read: 40
    write: 41
    id: 31
    bytes: 2

  base-ffb-curve-x1:
    read: [40, 34]
    write: [41, 34]
    id: 1
    bytes: 1

  base-ffb-curve-x2:
    read: [40, 34]
    write: [41, 34]
    id: 2
    bytes: 1

  base-ffb-curve-x3:
    read: [40, 34]
    write: [41, 34]
    id: 3
    bytes: 1

  base-ffb-curve-x4:
    read: [40, 34]
    write: [41, 34]
    id: 4
    bytes: 1

  base-ffb-curve-y1:
    read: [40, 34]
    write: [41, 34]
    id: 5
    bytes: 1

  base-ffb-curve-y2:
    read: [40, 34]
    write: [41, 34]
    id: 6
    bytes: 1

  base-ffb-curve-y3:
    read: [40, 34]
    write: [41, 34]
    id: 7
    bytes: 1

  base-ffb-curve-y4:
    read: [40, 34]
    write: [41, 34]
    id: 8
    bytes: 1

  base-ffb-curve-y5:
    read: [40, 34]
    write: [41, 34]
    id: 9
    bytes: 1

  base-ffb-curve-y0:
    read: [40, 34]
    write: [41, 34]
    id: 10
    bytes: 1

  base-output:
    read: 43
    write: -1
    id: 1
    bytes: 2

  base-output-err:
    read: 43
    write: -1
    id: 2
    bytes: 2

  base-mcu-temp:
    read: 43
    write: -1
    id: 4
    bytes: 2

  base-mosfet-temp:
    read: 43
    write: -1
    id: 5
    bytes: 2

  base-motor-temp:
    read: 43
    write: -1
    id: 6
    bytes: 2

# Dashboard
  dash-brightness:
    read: 51
    write: 50
    id: 0
    bytes: 4

  dash-ui-index:
    read: 51
    write: 50
    id: 1
    bytes: 4

  dash-speed-unit:
    read: 51
    write: 50
    id: 2
    bytes: 4

  dash-temp-unit:
    read: 51
    write: 50
    id: 3
    bytes: 4

# Steering wheel
  # TODO: check if this works
  wheel-colors:
    read: 64
    write: 63
    id: 0
    bytes: 9

  wheel-brightness:
    read: 64
    write: 63
    id: 1
    bytes: 1

  wheel-indicator-timings:
    read: 64
    write: 63
    id: 2
    bytes: 10

  wheel-paddles-mode:
    read: 64
    write: 63
    id: 3
    bytes: 1

  wheel-indicator-mode:
    read: 64
    write: 63
    id: 4
    bytes: 1

  wheel-stick-mode:
    read: 64
    write: 63
    id: 5
    bytes: 2

  wheel-display-mode:
    read: 64
    write: 63
    id: 7
    bytes: 1

  wheel-clutch-point:
    read: 64
    write: 63
    id: 9
    bytes: 1

  wheel-knob-mode:
    read: 64
    write: 63
    id: 10
    bytes: 1

  wheel-paddle-adaptive-mode:
    read: 64
    write: 63
    id: 11
    bytes: 1

  wheel-paddle-button-mode:
    read: 64
    write: 63
    id: 13
    bytes: 1

  wheel-rmp-value1:
    read: 64
    write: 63
    id: [15, 0]
    bytes: 3

  wheel-rmp-value2:
    read: 64
    write: 63
    id: [15, 1]
    bytes: 3

  wheel-rmp-value3:
    read: 64
    write: 63
    id: [15, 2]
    bytes: 3

  wheel-rmp-value4:
    read: 64
    write: 63
    id: [15, 3]
    bytes: 3

  wheel-rmp-value5:
    read: 64
    write: 63
    id: [15, 4]
    bytes: 3

  wheel-rmp-value6:
    read: 64
    write: 63
    id: [15, 5]
    bytes: 3

  wheel-rmp-value7:
    read: 64
    write: 63
    id: [15, 6]
    bytes: 3

  wheel-rmp-value8:
    read: 64
    write: 63
    id: [15, 7]
    bytes: 3

  wheel-rmp-value9:
    read: 64
    write: 63
    id: [15, 8]
    bytes: 3

  wheel-rmp-value10:
    read: 64
    write: 63
    id: [15, 9]
    bytes: 3

  wheel-key-combination:
    read: 64
    write: 63
    id: 19
    bytes: 4

  wheel-indicator-group-brightness:
    read: [64, 20]
    write: [63, 20]
    id: 0
    bytes: 1

  wheel-buttons-group-brightness:
    read: [64, 20]
    write: [63, 20]
    id: 2
    bytes: 1

  wheel-flags-group-brightness:
    read: [64, 20]
    write: [63, 20]
    id: 3
    bytes: 1

  # TODO: wheel indicator, button, flag colors

  wheel-indicator-interval:
    read: 64
    write: 63
    id: 22
    bytes: 4

  wheel-rpm-regulation-mode:
    read: 64
    write: 63
    id: 23
    bytes: 1

# hpattern shifter
  hpattern-hid-mode:
    read:
    write:
    id: -1
    bytes:

  hpattern-throttle-blip:
    read:
    write:
    id: -1
    bytes:

  hpattern-blip-output:
    read:
    write:
    id: -1
    bytes:

  hpattern-blip-duration:
    read:
    write:
    id: -1
    bytes:

# estop
  estop-set-status:
    read: -1
    write: 70
    id: 0
    bytes: 1

  estop-get-status:
    read: 70
    write: -1
    id: 1
    bytes: 1

# Sequential shifter
  sequential-hid-mode:
    read: 81
    write: 82
    id: 1
    bytes: 2

  sequential-apply-mode:
    read: 81
    write: 82
    id: 2
    bytes: 2

  sequential-brightness:
    read: 81
    write: 82
    id: 3
    bytes: 2

  sequential-colors:
    read: 81
    write: 82
    id: 4
    bytes: 2

  sequential-direction:
    read: 81
    write: 82
    id: 5
    bytes: 2

  sequential-paddle-sync:
    read: 81
    write: 82
    id: 6
    bytes: 2

  sequential-output:
    read: 83
    write: -1
    id: 1
    bytes: 2

# Handbrake
  handbrake-direction:
    read: 91
    write: 92
    id: 1
    bytes: 1

  handbrake-range-start:
    read: 91
    write: 92
    id: 2
    bytes: 2

  handbrake-range-end:
    read: 91
    write: 92
    id: 3
    bytes: 2

  handbrake-hid-mode:
    read: 91
    write: 92
    id: 4
    bytes: 2

  handbrake-y1:
    read: 91
    write: 92
    id: 5
    bytes: 4

  handbrake-y2:
    read: 91
    write: 92
    id: 6
    bytes: 4

  handbrake-y3:
    read: 91
    write: 92
    id: 7
    bytes: 4

  handbrake-y4:
    read: 91
    write: 92
    id: 8
    bytes: 4

  handbrake-y5:
    read: 91
    write: 92
    id: 9
    bytes: 4

  handbrake-button-threshold:
    read: 91
    write: 92
    id: 10
    bytes: 2

  handbrake-mode:
    read: 91
    write: 92
    id: 11
    bytes: 2

  handbrake-output:
    read: 93
    write: -1
    id: 1
    bytes: 2

# Hub
  hub-port1:
    read: 100
    write: -1
    id: 1
    bytes: 1

  hub-port2:
    read: 100
    write: -1
    id: 2
    bytes: 1

  hub-port3:
    read: 100
    write: -1
    id: 3
    bytes: 1

  hub-port4:
    read: 100
    write: -1
    id: 4
    bytes: 1

  hub-pedals:
    read: 100
    write: -1
    id: 5
    bytes: 1
